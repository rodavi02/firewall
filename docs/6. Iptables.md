## Iptables

#### Introducción
Iptables es una herramienta que permite la configuración de un cortafuegos en un sistema UNIX. Los cortafuegos que se pueden configurar con iptables pueden ser **por nodo** o **perimetrales**.

Un cortafuegos por nodo es aquel que se sitúa en un equipo concreto y que solo actúa sobre ese, configurando qué puede entrar o salir de dicho equipo y qué no. Por otro lado, hablamos de cortafuegos perimetral cuando este actúa de "mediador" entre dos o más redes. Estos tipos de cortafuegos deciden sobre lo que entra, sale o puede circular por sí mismo aunque no sea el destinatario final. En este proyecto el cortafuegos que vamos a implementar es un **Cortafuegos Perimetral**.

#### Listar reglas iptables
Para ver las reglas iptables que tenemos actualmente en funcionamiento en nuestro cortafuegos así como la política por defecto usamos el siguiente comando:
~~~
iptables -L -nv
~~~

Sólamente con **iptables -L** ya se listarían las reglas. El hecho de añadir **-nv** detrás es para que a la hora de listarlas las podamos ver enumeradas. Además nos permite comprobar los paquetes que se han visto afectados por cada una de las reglas y las políticas.

#### Añadir regla iptables
A la hora de añadir una regla iptables hay que tener en cuenta si queremos que la regla aparezca al final de la lista o al principio. Esto es muy importante puesto que las reglas se van leyendo una a una. Si se cumple una, se vuelve arriba y no sigue hacia abajo. Es por eso que en determinadas ocasiones, cuando hay varias reglas que se contradicen, debemos añadir la regla al principio de la lista para que la regla antigua no tenga efecto o borrar la que quedó obsoleta y añadir al final de la lista la siguiente regla. Dependiendo de donde queremos que se coloque la regla, podemos añadir las reglas de las siguientes formas:

- Append: Se añade al final de la lista. Se utiliza **-A**.
~~~
iptables -A ...
~~~
- Insert: Se añade al principio de la lista. Se utiliza **-I**.
~~~
iptables -I ...
~~~

#### Borrar reglas iptables

#### Elementos de Iptables
Una regla iptables puede estar formada por muchos elementos, los cuales van a pasar a ser explicados a continuación.

##### Tipo de Tráfico
El tipo de tráfico determina si el paquete es entrante, saliente o si entra para posteriormente salir. Cuando el paquete es entrante hablamos de tráfico de tipo **INPUT**, cuando es saliente de tráfico de tipo **OUTPUT** y cuando entra para posteriormente salir hablamos de tráfico de tipo **FORWARD**.

##### Política por Defecto
La política por defecto determina si se permite por defecto o no un tipo de tráfico en concreto. Si se permite, la política sería **ACCEPT** mientras que si se deniega, la política sería **DROP**. Un cortafuegos puede tener distintas políticas por defecto en función del tipo de tráfico. Que el tráfico de entrada tenga valor (por ejemplo) DROP, no quiere decir que el resto de tráficos también lo tengan. Se puede dar el caso en el que haya tráficos con distinta política por defecto.

En un cortafuegos, como norma general, las políticas por defecto para cualquier tipo de tráfico debe ser DROP. De ese modo deniegas todo desde el principio y después configuras el cortafuegos para que permita hacer solo aquellas cosas que nos interesen que se hagan.

Para indicar la polícica por defecto se utiliza el caracter **-P**.

##### Protocolo
Determina el protocolo sobre el cuál va a tener efecto esa regla iptables.

##### 